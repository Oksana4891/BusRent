"use strict";window.addEventListener("DOMContentLoaded",function(){createPhoneMask('[name="user_tel"]'),scrolling(".pageup"),checkMailInputs(),bindModal(".js-contactUs",".js-popupCall",".js-popupCall_close","faded","fadeOut"),bindModal(".js-calc",".js-popupCalc_first",".js-popupCalc_firstClose","faded","fadeOut"),bindModal(".js-next_first",".js-popupCalc_second",".js-popupCalc_second--close","faded","fadeOut",!1),bindModal(".js-next_second",".js-popupCalc_third",".js-popupCalc_second--third","faded","fadeOut",!1),bindModal(".js-next_third",".js-popupCalc_fourth",".js-popupCalc_second--fourth","faded","fadeOut",!1),form()});var burger=document.querySelector("#burger"),burgerMenu=document.querySelector(".burger-menu");burger.onclick=function(){burger.classList.toggle("burger_active"),burgerMenu.classList.toggle("is-active")},burgerMenu.onclick=function(){burger.classList.toggle("burger_active"),burgerMenu.classList.toggle("is-active")};var triggersButton=document.querySelector(".js-call-btn"),messengerButtons=document.querySelectorAll(".messenger_bnt");function form(){var e=document.querySelectorAll("form"),c=document.querySelectorAll("input"),s="Загрузка...",r="Спасибо! Скоро мы с вами свяжемся",a="Что-то пошло не так...";e.forEach(function(o){o.addEventListener("submit",function(e){e.preventDefault();var t=new FormData(o),n=document.createElement("div");n.classList.add("status"),o.appendChild(n),document.querySelector(".status").textContent=s,fetch("../telegram.php",{method:"POST",body:t}).then(function(e){n.textContent=r}).catch(function(){n.textContent=a}).finally(function(){setTimeout(function(){c.forEach(function(e){return e.value=""}),n.remove()},5e3)})})})}function bindModal(e,t,n,o,c){var s=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],r=document.querySelectorAll(e),a=document.querySelector(t),u=document.querySelector(n),l=document.querySelectorAll(".popup");function i(e,t){document.body.style.overflow="",e.classList.remove("is-open"),e.classList.remove(t)}r.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),l.forEach(function(e){i(e)}),document.body.style.overflow="hidden",a.classList.add("is-open"),a.classList.add(o),a.classList.remove(c)})}),u.addEventListener("click",function(e){a.classList.add(c),i(a,o)}),a.addEventListener("click",function(e){e.target===e.currentTarget&&s&&(a.classList.add(c),i(a,o))})}triggersButton.onclick=function(){messengerButtons.forEach(function(e){e.classList.toggle("is-open")})},document.body.addEventListener("click",function(e){e.target!==triggersButton&&messengerButtons[0].classList.contains("is-open")&&messengerButtons.forEach(function(e){return e.classList.remove("is-open")})});var scrolling=function(e){var t=document.querySelector(e);window.addEventListener("scroll",function(){document.documentElement.scrollTop>document.documentElement.clientHeight?(t.classList.add("is-active","faded"),t.classList.remove("fadeOut")):(t.classList.add("fadeOut"),t.classList.remove("faded","is-active"))});var n=document.querySelectorAll('[href^="#"]');n.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var c=document.documentElement.scrollTop,s=this.hash,r=document.querySelector(s).getBoundingClientRect().top,a=null;console.log(c),console.log(r),requestAnimationFrame(function e(t){null===a&&(a=t);var n=t-a,o=r<0?Math.max(c-n/.3,c+r):Math.min(c+n/.3,c+r);document.documentElement.scrollTo(0,o);o!=c+r?requestAnimationFrame(e):location.hash=s})})})};function createPhoneMask(e){function t(e){var t="38(___)___-__-__",n=0,o=t.replace(/\D/g,""),c=this.value.replace(/\D/g,"");o.length>=c.length&&(c=o),this.value=t.replace(/./g,function(e){return/[_\d]/.test(e)&&n<c.length?c.charAt(n++):n>=c.length?"":e}),"blur"===e.type?3==this.value.length&&(this.value=""):function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}}(this.value.length,this)}document.querySelectorAll(e).forEach(function(e){e.addEventListener("input",t),e.addEventListener("focus",t),e.addEventListener("blur",t)})}function checkMailInputs(){document.querySelectorAll('[type="email"]').forEach(function(e){e.addEventListener("keypress",function(e){e.key.match(/[^a-z 0-9 @ \.]/gi)&&e.preventDefault()})})}